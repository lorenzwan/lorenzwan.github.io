---
sidebar_position: 1
title: "Split Keyboard"
description: "A guide to build a manuform split keyboard by using RP2040 microcontroller and QMK firmware."
tags:
  - "RP2040"
  - "qmk"
  - "vial-kb"
  - "dactyl-manuform"
  - "Cosmos-Keyboards"
---

:::warning

This page is under construction...

:::

## Overview

Building a split keyboard for work so I can move the Kinesis Advantage2 to the PC. I prefer 80%-100% keyboard but Kinesis Advantage360 Professional is too pricy.
Here is how I build a manuform split keyboard by using RP2040 microcontroller and QMK firmware.

### Final Product

![Front](/img/diy-projects/split-keyboard/front.jpg)
![Back](/img/diy-projects/split-keyboard/back.jpg)

### Side by Side

![Side by Side](/img/diy-projects/split-keyboard/side-by-side.jpg)

## Tools

| Item | Notes |
| :- | :- |
| 3D Printer | Print the cases |
| Multimeter | Test connections |
| Soldering Kit |  |
| Wire Stripper | Make dupont connectors |
| Crimping Tool Kit | Same as above |
| Jewelry Plier | Bend the diodes |
| Hot Glue | Hold stuff in place |
| Isopropyl Alcohol | >70%, undo the hot glue |

## Parts

**Bold** items are what I use for this project

| Item | QTY | Notes |
| :- | :-: | :- |
| Cases | 2 |  |
| Microcontrollers | 2 | **Adafruit KB2040**, Raspberry Pi Pico RP2040 |
| Purple Squishies | 2 | Wrist rest |
| PJ-320A TRRS Connectors | 2 | Connect two halves |
| TRRS Cable | 1 | **UGREEN** seems fine |
| Type C Cable | 1 | Same as above |
| Keyboard Switches | 88 | **Cherry MX Silent Red** or other MX-Compatible switches |
| Keycaps | 88 | **DSA profile** or any uniform profiles are recommended |
| 1N4148 Diodes | 88 | Get some extra just in case | 
| 24 Gauge Stranded Wire | - | Colored would be helpful |
| Dupont 2.54mm Connector Kit | - |  |
| M3 Flat Head Screws | 16 |  |
| M3 Heat Set Threaded Inserts | 16 |  |
| Rubber Feet | 16 |  |

## Steps

### Make & Print Cases

I used [Cosmos Keyboard Generator](https://ryanis.cool/cosmos/beta#cf) and edit it in Houdini.
The generator is in beta when I use it. It might take some time to achieve a nice-looking shape without any intersections.

![Cosmos Settings](/img/diy-projects/split-keyboard/cosmos-settings.png)

I settled down with these settings, 6 keys on the thumb cluster like the Advantage2, extra row on top for function keys, extra coloumn for the index.

![Base Plate](/img/diy-projects/split-keyboard/base-plate.png)

I combined the microcontroller holder with the base plate to create a stronger structure.
Instead of using the wrist rest from the generator, I modeled a riser for the Purple Squishy that came with the mattress.

### Wire Everything

It took me about 10 hours in total because Iâ€™m not good at soldering, but I got better and faster at it afterward.

#### Plan Matrix & Pins

A well-thought-out matrix can make my life easier when it comes to soldering and debugging.

Let's look at the pins on the board I'm using. The KB2040 is an Arduino Pro Micro-shaped Pi Pico with a Type C connector, a reset button, and a bootloader button.

![KB2040 Pinout](/img/diy-projects/split-keyboard/KB2040_pinout.png)[^1]

I picked USART Full-duplex[^2] driver because it's the fastest and the most efficient. It requires an I<sup>2</sup>C connection[^3].
Since the TRRS connectors are next to the board, it makes sense to use the `GPIO0` and `GPIO1` for the `TX` and `RX`.
Well, we have 16 pins left. 

![Matrix](/img/diy-projects/split-keyboard/matrix.png)

This is the final matrix after some drafts.

The `row` is straight forward.
I just connect most of the keys horizontally, and add a `row` for those 1u keys on the thumb cluster.
Then, connect those `rows` to the `GPIO` on the right side of the board from top to bottom.

For the `coloumns`, I unfold the thumb cluster so I can fit them into row `5` and `6`.
Make sure the `coloumns` go in one direction, so that `Esc` is `[0, 0]` and `F7` is `[7, 0]` in the matrix.
It would make more sense when we do the keymapping. Then, connect those `coloumns` to the `GPIO` on the left side of the board from top to bottom.

#### Bend Diodes

#### Strip Wires

### Build QMK Firmware

Hardware is done, it's time for the software.

#### Setup Environment

#### Define Keyboard

#### Define Keymap

#### Flash Firmware

#### [Optional] Add Vial QMK

<br/>

---

[^1]: [Overview | Adafruit KB2040 | Adafruit Learning System](https://learn.adafruit.com/adafruit-kb2040?view=all)
[^2]: ['serial' Driver | QMK Firmware](https://docs.qmk.fm/drivers/serial#usart-full-duplex)
[^3]: [Split Keyboard | QMK Firmware](https://docs.qmk.fm/features/split_keyboard#i2c-wiring)